plugins {
    id 'java'
    id "io.qameta.allure" version "2.8.1"
}

sourceCompatibility = JavaVersion.VERSION_1_8
targetCompatibility = JavaVersion.VERSION_1_8

configurations {
    agent
}

repositories {
    mavenCentral()
    jcenter()
}

dependencies {

    agent 'org.aspectj:aspectjweaver:1.8.10'
    compile("org.junit.jupiter:junit-jupiter:5.5.2",
            "org.seleniumhq.selenium:selenium-java:4.0.0-alpha-1",
            "io.qameta.allure:allure-gradle:2.8.1",
            "io.qameta.allure:allure-junit5:2.13.0"
    )
    testCompileOnly 'org.projectlombok:lombok:1.18.8'
    testAnnotationProcessor 'org.projectlombok:lombok:1.18.8'
}

[compileJava, compileTestJava]*.options*.compilerArgs = ['-parameters']

test.doFirst {
    jvmArgs "-javaagent:${configurations.agent.singleFile}"
}

test {
    systemProperties System.properties
    systemProperty 'allure.model.indentOutput', true
    useJUnitPlatform()
    testLogging.showStandardStreams = true
}

allure {
    autoconfigure = true
    version = '2.8.1'
}